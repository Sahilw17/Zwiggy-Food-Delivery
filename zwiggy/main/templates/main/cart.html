{% extends 'main/base.html' %}
{% load static %}

{% block content %}
<h2 class="text-3xl font-semibold mb-6">ðŸ›’ Your Cart</h2>

{% if cart_items %}
<div class="bg-white p-6 rounded card">
  <table class="w-full">
    <thead>
      <tr class="text-left text-sm text-gray-600 border-b pb-2">
        <th>Item</th><th>Qty</th><th>Price</th><th>Subtotal</th><th></th>
      </tr>
    </thead>
    <tbody>

      {% for it in cart_items %}
      <tr class="border-b">
        <td class="py-3">
          <div class="flex items-center gap-3">
            {% if it.image %}
            <img src="{{ it.image }}" class="w-12 h-12 object-cover rounded">
            {% else %}
            <img src="{% static 'main/images/placeholder.png' %}" class="w-12 h-12 object-cover rounded">
            {% endif %}

            <div class="font-medium">{{ it.name }}</div>
          </div>
        </td>

        <td>{{ it.qty }}</td>

        <td>â‚¹{{ it.price }}</td>

        <td>â‚¹{{ it.total }}</td>

        <td>
          <a href="{% url 'remove_from_cart' it.id %}" class="text-red-500 hover:underline">Remove</a>
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>

  <!-- Total + Checkout -->
  <div class="mt-6 text-right">
    <div class="text-xl font-semibold">Total: â‚¹{{ total }}</div>

    <a href="{% url 'checkout' %}"
       class="btn-accent inline-block mt-3 text-lg font-semibold px-6 py-2">
      Proceed to Checkout
    </a>
  </div>

</div>

{% else %}
<p class="text-gray-600">Your cart is empty. Add some tasty items ðŸ™‚</p>
{% endif %}
{% endblock %}
